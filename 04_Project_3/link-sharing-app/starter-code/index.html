<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Instrument Sans:wght@400;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Gotham Bold:wght@400&display=swap"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
  
  </head>
  <body>
    <div class="desktop-empty">
      <div class="desktop-empty-inner">
        <div class="frame-wrapper">
          <div class="group-parent">
            <img class="frame-child" alt="" src="./public/logo-devlinks-large.svg" />
           

            <div class="links-parent">
              <div class="links">
                <img
                  class="phlink-bold-icon"
                  alt=""
                  src="./public/ph_link-bold.svg"
                />

                <div class="links1">Links</div>
              </div>
              <div class="profile-details">
                <img
                  class="phlink-bold-icon"
                  alt=""
                  src="./public/ph_user-circle-bold.svg"
                />

                <div class="links1">Profile Details
                  <script>
                    document.write(localStorage.getItem("name"))
                  </script>
                </div>
              </div>
            </div>
            <div class="publish">
              <div class="preview-wrapper">
                <div class="preview">Preview</div>
              </div>
            </div>
            <div class="publish">
              <div class="preview-wrapper">
                <div id="logout" onclick="logout()" class="preview">Logout</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="frame-parent">
        <div class="preview-section-wrapper">
          <div class="preview-section">
            <img
              class="preview-section-child"
              alt=""
              src="./public/illustration-phone-mockup.svg"
            />

            <div class="frame-group">
              <div class="ellipse-parent">
                <div class="frame-item"></div>
                <div class="rectangle-parent">
                  <div class="frame-inner"></div>
                  <div class="rectangle-div"></div>
                </div>
              </div>
              <div class="rectangle-group">
                <div class="publish-parent">
                  <div class="publish2">
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-github.svg"/>
                    <div class="github">GitHub</div>
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-arrow-right.svg"/>
                  </div>
                  <div class="publish3">
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-youtube.svg"/>
                    <div class="github">YouTube</div>
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-arrow-right.svg" />
                  </div>
                  <div class="publish4">
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-linkedin.svg"/>
                    <div class="github">LinkedIn</div>
                    <img class="teenyiconsgithub-solid" alt="" src="./public/icon-arrow-right.svg"/>
                  </div>
                  <div class="frame-child2"></div>
                  <div class="frame-child2"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="frame-container">
          <div id="link_container" class="frame-div" style="display: none;">
            <div class="customize-your-links-parent">
              <b class="customize-your-links">Customize your links</b>
              <div class="addeditremove-links-below">
                Add/edit/remove links below and then share all your profiles
                with the world!
              </div>
            </div>
            <div class="publish-parent">
              <div id="add_link" class="publish1">
                <div class="preview-container">
                  <div class="preview">+ Add new link</div>
                </div>
              </div>
              <div id="level0" class="add-link-wrapper w-100">
                <div class="d-flex justify-content-between">
                  <div class="left d-flex">
                    <img src="./public/icon-equal.svg" alt="">
                    <p>Link #1</p>
                  </div>
                  <div class="right">
                    <button id="remove-btn">Remove</button>
                  </div>
                </div>
                <select id="appendDiv" name='options' class="form-control"></select>  
                <input type="text" class="w-100" id="link">
              </div>
              
              <div class="frame-wrapper1 d-none">
                <div class="group-container">
                  <img class="group-icon" alt="" src="./public/main.svg" />

                  <div class="lets-get-you-started-parent">
                    <b class="lets-get-you">Let’s get you started</b>
                    <div class="use-the-add">
                      Use the “Add new link” button to get started. Once you
                      have more than one link, you can reorder and edit them.
                      We’re here to help you share your profiles with everyone!
                    </div>
                  </div>
                </div>
                
              </div>
            </div>
          </div>
          <div class="frame-div" id="profile_container">
              <div class="customize-your-links-parent">
                <b class="customize-your-links">Profile Details</b>
                <div class="addeditremove-links-below">
                  Add your detail to create a personal touch in your profile.
                </div>
              </div>

              <div class="frame-parent4">
                <div class="profile-wrapper">
                  <div class="profile-picture-parent">
                    <div class="profile-inner">
                      <div class="profile-img-text flex-grow-1">Profile picture</div>
                      <div class="frame-wrapper2" style="display: none;">
                        <div class="phimage-parent">
                          <img
                            class="phimage-icon"
                            alt=""
                            src="./public/phimage.svg"
                          />

                          <div class="links">Change Image</div>
                        </div>
                      </div>
                      <div class="frame-wrapper2 flex-grow-2">
                        <div class="phimage-group">
                          <img
                            class="phimage-icon"
                            alt=""
                            src="./public/phimage1.svg"
                          />
                          <div id="profile_image" class="links">
                            <input type="file" accept="image/*" id="imgInp" placeholder="+ Upload Image">
                          </div>
                        </div>
                      </div>
                      <div class="profile-img-text flex-grow-2">
                        Image must be below 1024x1024px. Use PNG or JPG format.
                      </div>
                    </div>
                  </div>
                </div>
                <form action="#">
                  <div class="form-group">
                      <label for="first_name">First Name</label>
                      <input type="first_name" class="form-control" id="first_name" name="first_name" placeholder="e.g. John">
                  </div>
                  <div class="form-group">
                      <label for="last_name">Last Name</label>
                      <input type="last_name" class="form-control" id="last_name" name="last_name" placeholder="e.g. Appleseed">
                  </div>
                  <div class="form-group">
                      <label for="user_email">Email</label>
                      <input type="email" class="form-control" id="user_email" name="user_email" placeholder="Enter Email">
                  </div>
                </form>
              </div>

          </div>
          <div class="rectangle-container">
            <div class="publish-wrapper">
              <button type="button" id="saveProfile" onclick="saveProfileBtn()">Save</button>
              <button type="reset" id="resetProfile">Reset</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./data.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
      function logout(){
        localStorage.removeItem("name");
        localStorage.removeItem("email");
        window.location.href = "login.html";
      }
      
/* ================================== SELECT2 JS ========================================================= */
      var dynamicSelect = data.map((item)=>{
        return `<option value='option-${item.id}' data-src="${item.img}">${item.text}</option>`;
      }).join("");
      let appendDiv = document.querySelector("#appendDiv");
      appendDiv.innerHTML = dynamicSelect;

      function formatState (state) {
        if (!state.id) { return state.text; }
        var $state = $(
          '<span><img src="' + $(state.element).attr('data-src') + '" class="img-flag" /> ' + state.text + '</span>'
        );
        return $state;
      };
      $('select').select2({
        minimumResultsForSearch: Infinity,
        templateResult: formatState,
        templateSelection: formatState
      });
/* ================================== SELECT2 JS ========================================================= */

/* ================================== ADD LINKS  ========================================================== */
      $( document ).ready(function() {
        let level = 1;
        $("#add_link").click(function(){
          // $("level0").attr("style", "display:block;");
          let newElement = $("#level0").clone().insertAfter("#level" + (level - 1));
          newElement.attr("id", "level"+ level);
          newElement.find("#link").val("");
          newElement.find("#link").attr("id", "link" + level);
          let a = newElement.find("data-select2-id").attr("data-select2-id", "select2-data-1-yrga" + level);
          newElement.find("#appendDiv").attr("id", "appendDiv" + level);  
          console.log(a);
          newElement.find("#remove-btn").attr("id", "remove-btn" + level);
          ++level;
        })

        $("#remove-btn" + (level -1)).click(function(){
          $("#level" + (level - 1)).remove();
        })

      });

/* ================================== ADD LINKS  ========================================================== */

/* upload imgae */
      var imgInp = document.querySelector("#imgInp");
      var profile_img = document.querySelector("#profile_image");
      imgInp.onchange = evt => {
        const [file] = imgInp.files
        if (file) {
          var imgSrc = URL.createObjectURL(file)
          console.log(imgSrc, "uploaded");
          profile_img.style.backgroundImage = "url(" + imgSrc + ")";
        }
      }
/* upload image */

/* Save Profile Data */
      function saveProfileBtn(){
        var firstName = document.querySelector("#first_name").value;
        var lastName = document.querySelector("#last_name").value;
        var userEmail = document.querySelector("#user_email").value;
        console.log(firstName, lastName, userEmail);
        firstName.value = "";
        lastName.value = "";
        userEmail.value = "";
      }
/* Save Profile Data */

    </script>
  </body>
</html>
